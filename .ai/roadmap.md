# 🗺️ Grape Registry - 产品路线图

**文档版本**: v1.0  
**最后更新**: 2026-02-27  
**规划周期**: 2026 Q1 - Q4

---

## 📊 功能优先级排序

### 优先级定义

| 优先级 | 说明 | 时间范围 |
|--------|------|----------|
| **P0** | 紧急阻塞，必须立即处理 | 今天 |
| **P1** | 重要功能，本周内完成 | 本周 |
| **P2** | 中期规划，本月内完成 | 本月 |
| **P3** | 长期愿景，下季度完成 | 本季度 |

---

## 🎯 短期计划（1-4 周）

### Week 1: 修复阻塞问题

| 任务 | 优先级 | 状态 | 预计工时 |
|------|--------|------|----------|
| **修复双端口路由冲突** | P0 | ⚠️ 进行中 | 4-8 小时 |
| **验证大型包下载** | P0 | ❌ 未开始 | 2-4 小时 |
| **运行测试项目验证** | P0 | ❌ 未开始 | 2-4 小时 |

**验收标准**:
- [ ] 服务正常启动（4873 + 4874 端口）
- [ ] vite/typescript 等大包可正常下载
- [ ] vue3-demo 测试项目 `npm install` 成功

### Week 2: 完善核心功能

| 任务 | 优先级 | 状态 | 预计工时 |
|------|--------|------|----------|
| **补充 Handler 单元测试** | P1 | ❌ 未开始 | 8-12 小时 |
| **完善部署文档** | P1 | ❌ 未开始 | 4-6 小时 |
| **清理技术债** | P1 | ❌ 未开始 | 4-6 小时 |

**验收标准**:
- [ ] 核心 Handler 测试覆盖率 > 60%
- [ ] 部署文档包含故障排查章节
- [ ] 移除或实现 PostgreSQL 占位代码

### Week 3-4: 性能与稳定性

| 任务 | 优先级 | 状态 | 预计工时 |
|------|--------|------|----------|
| **性能基准测试** | P2 | ❌ 未开始 | 8-12 小时 |
| **集成测试框架** | P2 | ❌ 未开始 | 12-16 小时 |
| **监控告警配置** | P2 | ❌ 未开始 | 6-8 小时 |

**验收标准**:
- [ ] 输出性能测试报告（QPS、P99 延迟）
- [ ] 核心流程集成测试覆盖
- [ ] Prometheus 告警规则配置完成

---

## 📈 中期规划（1-3 月）

### Month 1: 运维增强

| 功能 | 优先级 | 状态 | 价值 |
|------|--------|------|------|
| **LDAP/AD 集成** | P2 | ❌ 未开始 | 企业用户必需 |
| **备份调度工具** | P2 | ❌ 未开始 | 数据安全保障 |
| **日志聚合** | P2 | ❌ 未开始 | 运维效率提升 |

**预期成果**:
- 支持企业现有账号系统
- 自动化备份调度
- ELK/Loki 日志集成

### Month 2: 存储扩展

| 功能 | 优先级 | 状态 | 价值 |
|------|--------|------|------|
| **S3/OSS 存储支持** | P2 | ❌ 未开始 | 云原生部署必需 |
| **Redis 缓存层** | P2 | ❌ 未开始 | 高并发性能提升 |
| **CDN 集成** | P3 | ❌ 未开始 | 下载加速 |

**预期成果**:
- 支持对象存储后端
- 元数据缓存命中率 > 90%
- 大文件下载走 CDN

### Month 3: 高可用准备

| 功能 | 优先级 | 状态 | 价值 |
|------|--------|------|------|
| **PostgreSQL 支持** | P2 | ❌ 未开始 | 并发能力提升 |
| **多实例部署** | P3 | ❌ 未开始 | 高可用基础 |
| **配置中心集成** | P3 | ❌ 未开始 | 动态配置管理 |

**预期成果**:
- 支持 PostgreSQL 数据库
- 可部署多实例（共享存储）
- Apollo/Nacos 配置集成

---

## 🌟 长期愿景（3-12 月）

### Quarter 2: 企业特性

| 功能 | 状态 | 价值 |
|------|------|------|
| **多租户支持** | ❌ 未开始 | SaaS 化基础 |
| **包级别 ACL** | ❌ 未开始 | 细粒度权限 |
| **审计日志增强** | ❌ 未开始 | 合规需求 |

### Quarter 3: 生态建设

| 功能 | 状态 | 价值 |
|------|------|------|
| **插件系统** | ❌ 未开始 | 生态扩展 |
| **Webhook 市场** | ❌ 未开始 | 第三方集成 |
| **CLI 工具** | ❌ 未开始 | 用户体验 |

### Quarter 4: 云原生

| 功能 | 状态 | 价值 |
|------|------|------|
| **Kubernetes Operator** | ❌ 未开始 | K8s 原生部署 |
| **Helm Chart** | ❌ 未开始 | 简化部署 |
| **Service Mesh 集成** | ❌ 未开始 | 微服务架构 |

---

## 📋 功能 backlog

### 已实现功能 ✅

| 功能 | 完成时间 | 说明 |
|------|----------|------|
| JWT 认证 | v0.1.0 | 用户登录颁发 token |
| 持久化 Token | v0.1.0 | CI/CD 自动化 |
| 多上游路由 | v0.1.0 | 按 scope 路由 |
| 配置热更新 | v0.1.0 | 无需重启 |
| 审计日志 | v0.1.0 | 操作记录 |
| Webhook | v0.1.0 | 事件通知 |
| Prometheus | v0.1.0 | 监控指标 |
| Web UI | v0.1.0 | 管理后台 |
| 备份/恢复 | v0.1.0 | 数据保护 |
| 垃圾回收 | v0.1.0 | 清理孤立文件 |
| 包 Owner | v0.1.0 | 包级别 ACL |
| Docker | v0.1.0 | 容器化部署 |

### 规划中功能 📋

| 功能 | 优先级 | 预计版本 | 说明 |
|------|--------|----------|------|
| LDAP 集成 | P2 | v0.2.0 | 企业 AD 账号对接 |
| S3 存储 | P2 | v0.2.0 | 对象存储后端 |
| Redis 缓存 | P2 | v0.2.0 | 元数据缓存 |
| PostgreSQL | P2 | v0.3.0 | 并发能力提升 |
| 多实例 | P3 | v0.3.0 | 高可用部署 |
| 插件系统 | P3 | v0.4.0 | 生态扩展 |
| 包扫描 | P3 | v0.4.0 | 安全漏洞检测 |
| Helm Chart | P3 | v0.3.0 | K8s 部署 |

### 暂缓功能 ⏸️

| 功能 | 暂缓原因 | 重新评估时间 |
|------|----------|--------------|
| RBAC 权限模型 | 成本高，当前角色系统已满足 | 2026 Q3 |
| 高可用集群 | 架构复杂度高 | 2026 Q4 |
| SAML/OIDC | 企业需求小众 | 2026 Q3 |
| 包安全扫描 | 需集成 OSV API | 2026 Q4 |

---

## 🎯 成功指标

### 技术指标

| 指标 | 当前值 | 目标值 | 时间 |
|------|--------|--------|------|
| **内存占用** | < 10MB | < 15MB | 持续 |
| **P99 延迟** | 未测量 | < 100ms | Q2 |
| **QPS** | 未测量 | > 1000 | Q2 |
| **测试覆盖率** | ~30% | > 70% | Q2 |
| **MTTR** | 未测量 | < 30 分钟 | Q3 |

### 产品指标

| 指标 | 当前值 | 目标值 | 时间 |
|------|--------|--------|------|
| **GitHub Stars** | 未统计 | > 500 | Q4 |
| **Docker Pulls** | 未统计 | > 10k | Q4 |
| **活跃用户** | 未统计 | > 100 | Q4 |
| **贡献者** | 未统计 | > 20 | Q4 |

---

## 📅 版本计划

### v0.1.0 (当前版本)

**发布时间**: 2026-02-27  
**主题**: 核心功能完成

**已完成**:
- ✅ npm 协议兼容
- ✅ 用户认证 + Token
- ✅ 多上游路由
- ✅ Web UI
- ✅ 备份/恢复
- ✅ Docker 部署

**已知问题**:
- 🔴 双端口路由 Bug
- 🟡 测试覆盖率低

### v0.2.0 (计划中)

**发布时间**: 2026-04-30  
**主题**: 运维增强

**规划功能**:
- LDAP/AD 集成
- S3/OSS 存储
- Redis 缓存
- 性能优化

### v0.3.0 (计划中)

**发布时间**: 2026-07-31  
**主题**: 高可用

**规划功能**:
- PostgreSQL 支持
- 多实例部署
- Helm Chart
- 监控告警

### v1.0.0 (计划中)

**发布时间**: 2026-12-31  
**主题**: 生产就绪

**规划功能**:
- 完整测试覆盖
- 性能基准达标
- 文档完善
- 生产验证

---

## 🔄 迭代流程

### 迭代周期

- **Sprint 长度**: 2 周
- **计划会议**: 每 Sprint 第一天
- **回顾会议**: 每 Sprint 最后一天

### 发布流程

```
1. 功能开发完成
   ↓
2. 代码审查 + 测试
   ↓
3. 集成测试通过
   ↓
4. 文档更新
   ↓
5. 发布 Release
   ↓
6. Docker 镜像推送
```

---

## 📊 资源需求

### 人力资源

| 角色 | 当前 | 需求 | 缺口 |
|------|------|------|------|
| **后端开发** | 1 | 2 | -1 |
| **前端开发** | 1 | 1 | 0 |
| **DevOps** | 0 | 1 | -1 |
| **测试工程师** | 0 | 1 | -1 |

### 基础设施

| 资源 | 当前 | 需求 | 说明 |
|------|------|------|------|
| **CI/CD** | GitHub Actions | 充足 | 免费额度 |
| **Docker Hub** | 免费 | 充足 | 镜像托管 |
| **测试环境** | 本地 | 云服务器 | 需部署测试集群 |

---

**最后更新**: 2026-02-27  
**下次审查**: 2026-03-13（双周迭代）  
**负责人**: Grape Team
